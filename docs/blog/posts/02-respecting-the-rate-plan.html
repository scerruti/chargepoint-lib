<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Respecting the Rate Plan - CPH50 Control Blog</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            padding: 20px;
            color: #333;
            line-height: 1.8;
        }
        .container { max-width: 800px; margin: 0 auto; }
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 30px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        header h1 { margin-bottom: 10px; font-size: 2.5em; }
        .post-meta { opacity: 0.9; font-size: 0.95em; }
        nav {
            background: white;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        nav a {
            color: #667eea;
            text-decoration: none;
            margin-right: 20px;
            font-weight: 500;
        }
        nav a:hover { text-decoration: underline; }
        article {
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        article h2 {
            color: #667eea;
            margin: 30px 0 15px 0;
            font-size: 1.8em;
        }
        article h3 {
            color: #764ba2;
            margin: 25px 0 10px 0;
            font-size: 1.4em;
        }
        article p { margin-bottom: 15px; }
        article ul, article ol { margin: 15px 0 15px 30px; }
        article li { margin-bottom: 8px; }
        article code {
            background: #f3f4f6;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        article blockquote {
            border-left: 4px solid #667eea;
            padding-left: 20px;
            margin: 20px 0;
            color: #555;
            font-style: italic;
        }
        .tag {
            display: inline-block;
            background: #e0e7ff;
            color: #667eea;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.85em;
            margin-right: 5px;
        }
        .warning {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        footer {
            text-align: center;
            padding: 20px;
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Respecting the Rate Plan</h1>
            <div class="post-meta">
                üìÖ January 9, 2026 | 
                <span class="tag">chargepoint</span>
                <span class="tag">utility-rates</span>
                <span class="tag">design</span>
            </div>
        </header>

        <nav>
            <a href="../../index.html">Dashboard</a>
            <a href="../../label-simple.html">Labeling Portal</a>
            <a href="../index.html">‚Üê Back to Blog</a>
        </nav>

        <article>
            <p>Before diving into automation, I want to explain why I was so committed to preserving the CPH50's native Energy Price Plan scheduling rather than replacing it entirely.</p>

            <h2>What is Energy Price Plan Scheduling?</h2>

            <p>Most EV charging stations let you set simple time-based schedules: "Only charge between midnight and 6 AM." This works, but it's brittle. When your utility changes rate windows‚Äîsay, extending off-peak hours to 7 AM during summer‚Äîyou have to manually update the schedule.</p>

            <p>ChargePoint's Energy Price Plan feature takes a different approach:</p>

            <ol>
                <li>You select your utility provider from a list</li>
                <li>You choose your specific rate plan (e.g., SDGE EV-TOU-5)</li>
                <li>The charger automatically schedules charging during the cheapest time-of-use windows</li>
            </ol>

            <p>The charger handles all the complexity:</p>

            <ul>
                <li><strong>Weekday vs. weekend rates</strong> ‚Äì Different utilities have different schedules</li>
                <li><strong>Seasonal variations</strong> ‚Äì Summer and winter rate windows can differ</li>
                <li><strong>Holiday schedules</strong> ‚Äì Some utilities treat holidays as weekends</li>
                <li><strong>Rate plan updates</strong> ‚Äì When the utility changes rates, ChargePoint updates the schedule</li>
            </ul>

            <h2>The Pitfall: Conflicting Schedules</h2>

            <p>Many EVs also have their own built-in charging schedulers. You can set departure times, charge limits, and time windows directly in the vehicle.</p>

            <div class="warning">
                <strong>‚ö†Ô∏è Critical Rule:</strong> Never set schedules in both the vehicle <em>and</em> the charger. Pick one.
            </div>

            <p>If both the car and the charger are trying to manage schedules, you can end up in scenarios where:</p>

            <ul>
                <li>The car says "don't charge yet" while the charger says "charge now"</li>
                <li>Neither device charges because each is waiting for the other</li>
                <li>The car charges immediately, ignoring the cheap rate window</li>
            </ul>

            <p>For us, setting the schedule in the charger made more sense. The ChargePoint app is accessible to both of us, whereas vehicle apps are tied to individual accounts. Plus, the Energy Price Plan handles complexity we'd otherwise manage manually.</p>

            <h2>Why Not Just Disable It?</h2>

            <p>When I realized the native scheduler wouldn't extend past 6 AM, my first instinct was: "I'll just turn off the Energy Price Plan and manage everything myself."</p>

            <p>But that would mean:</p>

            <ul>
                <li>Manually tracking SDGE rate changes (they happen)</li>
                <li>Updating schedules when daylight saving time shifts</li>
                <li>Handling weekday/weekend differences</li>
                <li>Missing out on future rate optimizations ChargePoint might add</li>
            </ul>

            <p>It felt like throwing away a genuinely useful feature just because it didn't do <em>one extra thing</em> I needed.</p>

            <h2>The Design Philosophy</h2>

            <p>So the architecture became clear: <strong>extend, don't replace</strong>.</p>

            <blockquote>
                Let the CPH50 handle what it's good at‚Äîscheduling around utility rate windows. Our automation just adds a single action at 6 AM: "If you stopped charging because the rate window ended, keep going for one more hour."
            </blockquote>

            <p>This approach has several advantages:</p>

            <ul>
                <li><strong>Minimal intervention:</strong> We only touch the system once per day</li>
                <li><strong>Fail-safe:</strong> If our automation breaks, the charger still works normally</li>
                <li><strong>No rate tracking:</strong> ChargePoint continues to handle TOU complexity</li>
                <li><strong>Future-proof:</strong> If ChargePoint improves rate optimization, we benefit automatically</li>
            </ul>

            <h2>The Technical Constraint</h2>

            <p>This design choice had one important technical consequence: our automation couldn't <em>stop</em> charging at 7 AM. That would require either:</p>

            <ol>
                <li>Polling the ChargePoint API continuously to detect when charging stops naturally</li>
                <li>Setting a hard cutoff time, which might interrupt charging prematurely</li>
            </ol>

            <p>Instead, we rely on the vehicle's charge limit. When Susan's Volvo reaches 80%, it stops drawing power. The charger sees zero current and ends the session. No additional automation needed.</p>

            <p>This is why vehicle-side charge limits are so important. They act as a natural stop condition, regardless of how long the charging session runs.</p>

            <h2>What About Emergency Override?</h2>

            <p>Of course, there are edge cases. What if we need to charge immediately at 2 PM because someone's making an unexpected trip?</p>

            <p>The ChargePoint app has a manual "Charge Now" button that overrides any schedule. That's the escape hatch. Our automation doesn't interfere with it.</p>

            <h2>Next: Finding the Community Foundation</h2>

            <p>With the design philosophy established‚Äîextend the native scheduler, don't replace it‚Äîthe next question was: how do we actually <em>send</em> a "start charging" command at 6 AM?</p>

            <p>ChargePoint doesn't offer a public API. There's no official webhook, no documented REST endpoints, no developer portal. But as I'd soon discover, I wasn't the first person to want programmatic control of a ChargePoint charger.</p>

            <p>That's where the community comes in.</p>

            <hr style="margin: 40px 0; border: none; border-top: 1px solid #e5e7eb;">

            <p><strong>Series navigation:</strong> Prev ‚Üí <a href="01-the-6am-problem.html" style="color: #667eea;">The 6 AM Problem</a> | Next ‚Üí <a href="03-standing-on-community-shoulders.html" style="color: #667eea;">Standing on Community Shoulders</a></p>
        </article>

        <!-- Comments powered by giscus. Configured for repo discussions category "Blog comments". -->
        <div id="comments">
            <script src="https://giscus.app/client.js"
                data-repo="scerruti/cph50-control"
                data-repo-id="R_kgDOQ2fzlA"
                data-category="Blog comments"
                data-category-id="DIC_kwDOQ2fzlM4C0xmp"
                data-mapping="pathname"
                data-strict="1"
                data-reactions-enabled="1"
                data-emit-metadata="0"
                data-input-position="top"
                data-theme="light"
                data-lang="en"
                crossorigin="anonymous"
                async>
            </script>
        </div>

        <footer>
            <p>CPH50 Control Project &copy; 2026 | <a href="https://github.com/scerruti" style="color: #667eea;">@scerruti</a></p>
        </footer>
    </div>
</body>
</html>
